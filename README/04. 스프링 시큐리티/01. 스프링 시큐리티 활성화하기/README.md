# 4.1 스프링 시큐리티 활성화하기
- 맨 먼저 할 일은 스프링 부트 보안 스타터 의존성을 pom.xml에 추가하는 것.
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-security</artifactId>
</dependency>

<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-test</artifactId>
    <scope>test</scope>
</dependency>
```
- 첫 번째 추가하는 항목은 스프링 부트 보안 스타터 의존성이고, 두 번째는 보안 테스트 의존성이다.
- 위 의존성이 스프링 애플리케이션을 안전하게 하기 위해 필요한 전부다. 애플리케이션이 시작되면 스프링이 우리 프로젝트의 classpath에 있는 스프링 시큐리티(Spring Security) 라이브러리를 찾아 기본적인
보안 구성을 설정해 준다.
- 실행하여 확인해 보면, 접속 시 스프링 시큐리티에서 제공하는 HTTP 기본 인증 대화상자가 나타난다. Usernamed은 user를 입력하고 Password는 무작위로 자동 생성되어 애플리케이션 로그 파일에 수록된다.
```text
Using generated security password: de992ff8-df07-4202-8997-ff178840313c
```
- 36자리의 비밀번호를 마우스로 선택하여 복사 비밀번호에 붙여넣기 하면 로그인된다. 그러면 애플리케이션을 사용할 수 있는 권한이 부여되어 우리가 접속한 페이지가 나타난다 (스프링의 username은 사용자 id를
의미한다.)
- 이것을 보면 보안 기능 추가가 매우 쉬운 것처럼 보인다. 그리고 이제 우리 애플리케이션이 안전해졌다. 그러나 스프링 시큐리티는 이제 시작이다. 우선, 어떤 보안 구성이 자동으로 제공되는 지 알아보자.
- 시큐리티 스타터를 빌드 파일에 추가만 해도 다음의 보안 구성이 제공된다.
  - 모든 HTTP 요청 경로는 인증(authentication)되어야 한다.
  - 어떤 특정 역할이나 권한이 없다.
  - 로그인 페이지가 따로 없다.
  - 스프링 시큐리티의 HTTP 기본 인증을 사용해서 인증된다.
  - 샤용자는 하나만 있으며, 이름은 user다. 비밀번호는 암호화해 준다.
- 이것은 첫 출발에는 도움이 되지만, 타코 클라우드를 포함 대부분의 애플리케이션에서 필요한 보안 기능은 이런 기본적인 보안 기능과 많이 다를 것이다.
- 타코 클라우드 애플리케이션의 보안을 제대로 구축하려면 더 많은 작업이 필요하며, 최소한 다음 기능을 할 수 있도록 스프링 시큐리티를 구성해야 한다.
  - 스프링 시큐리티의 HTTP 인증 대화상자 대신 우리의 로그인 페이지로 인증한다.
  - 다수의 사용자를 제공하며, 새로운 타코 클라우드 고객이 사용자로 등록할 수 있는 페이지가 있어야 한다.
  - 서로 다른 HTTP 요청 경로마다 서로 다른 보안 규칙을 적용한다. 예를 들어, 홈페이지와 사용자 등록 페이지는 인증이 필요하지 않다.
- 타코 클라우드의 이런 보안 요구를 충족하기 위해서는 스프링 자동-구성이 하는 것을 대체하기 위한 작업을 해야 한다.
- 우선, 한 명 이상의 사용자를 가질 수 있도록 타코 클라우드에 적합한 사용자 스토어(store)를 구성하는 것부터 시작한다.


