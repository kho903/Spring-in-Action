# 5.3 프로파일 사용해서 구성하기
- 애플리케이션이 서로 다른 런타임 환경에 배포, 설치될 때는 대개 구성 명세가 달라진다. 예를 들어, 데이터베이스 연결 명세가 개발 환경과 다를 것이고, 프로덕션 환경과도 여전히 다를 것이다. 이때는 각 환경의
속성들을 application.properties, application.yml 에 정의하는 대신, 운영체제의 환경 변수를 사용해서 구성하는 것이 한 가지 방법.
- 예를 들어, 개발 시점에는 자동-구성된 내장 H2 데이터베이스를 사용할 수 있다. 그러나 프로덕션 환경에서는 다음과 같이 환경 변수로 데이터베이스 구성 속성을 설정해야 한다.
```text
$ export SPRING_DATASOURCE_URL=jdbc:mysql://localhost/tacocloud
$ export SPRING_DATASOURCE_USERNAME=tacouser
$ export SPRING_DATASOURCE_PASSWORD=tacopassword
```
- 하지만 하나 이상의 구성 속성을 환경 변수로 지정하는 것은 번거롭고 추적 관리, 오류가 있을 경우 변경 전으로 바로 되돌릴 수 있는 방법이 마땅치 않다.
- 따라서 이 방법 대신 스프링 프로파일을 사용하자. 런타임 시에 활성화(active)되는 프로파일에 따라 서로 다른 빈, 구성 클래스, 구성 속성들이 적용 또는 무시되도록 하는 것이 프로파일.

- 예를 들어, 개발, 디버깅 목적으로 내장 H2 데이터베이스를 사용하고, 타코 클라우드 코드의 로깅 수준을 DEBUG로 설정한다고 해보자. 그러나 프로덕션 환경에서는 외부의 MySQL 데이터베이스를 사용하고, 로깅 수준은
WARN으로 설정하고자 한다. 이 경우 개발 시에는 데이터 소스 속성을 따로 설정하지 않아도 자동-구성된 H2 데이터베이스를 충분히 사용할 수 있다.
- 그리고 로깅 수준의 경우 tacos 기본 패키지의 logging.level.tacos 속성을 application.yml에 DEBUG로 설정하면 된다.
```yaml
logging:
  level:
    tacos: DEBUG
```
- 개발 환경에서 필요한 것은 이게 전부다. 그러나 application.yml을 변경하지 않고 이 애플리케이션을 프로덕션 환경에 배포 및 설치한다면, tacos 패키지의 DEBUG 로깅 수준과 내장 H2 데이터베이스 사용은
여전히 그대로일 것이다.
- 바로 이럴 때 프로덕션 환경에 적합한 속성들을 설정하는 프로파일을 정의해야 한다.

